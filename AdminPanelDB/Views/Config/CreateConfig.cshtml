@model AdminPanelDB.Models.ConfigEntry

@{
    var systemOptions = new List<string> { "Sandbox", "Production", "Test" };
    var projectOptions = new List<string> { "AdminPanel", "UserPortal", "Reports", "Allgemein", "Verfuegungsblatt", "Vorlagenverwaltung", "VorgangsDatenSonstigeGebuehren", "DigitalerUmlauf", "EotaPortal", "Ebb"  };

    var defaultSystem = ViewBag.DefaultSystem ?? "Sandbox";
    var defaultProject = ViewBag.DefaultProject ?? "AdminPanel";
}

@if (ViewBag.Error != null)
{
    <p style="color:red; text-align:center; font-weight:bold;">
        @ViewBag.Error
    </p>
}

<h2 style="text-align:center;">Config erstellen</h2>

<div class="form-container">
    <form asp-action="CreateConfig" method="post">
        <div>
            <label asp-for="System">System:</label>
            <select asp-for="System" class="form-control">
                @foreach (var system in systemOptions)
                {
                    if (system == (Model.System ?? defaultSystem))
                    {
                        <option value="@system" selected="selected">@system</option>
                    }
                    else
                    {
                        <option value="@system">@system</option>
                    }
                }
            </select>
        </div>

        <div>
            <label asp-for="ProjektName">ProjektName:</label>
            <select asp-for="ProjektName" class="form-control">
                @foreach (var project in projectOptions)
                {
                    if (project == (Model.ProjektName ?? defaultProject))
                    {
                        <option value="@project" selected="selected">@project</option>
                    }
                    else
                    {
                        <option value="@project">@project</option>
                    }
                }
            </select>
        </div>

        <div>
            <label asp-for="KeyBezeichnung">KeyBezeichnung:</label>
            <input asp-for="KeyBezeichnung" maxlength="120"/>
        </div>
       
        <div>
            <label asp-for="StringValue">StringValue:</label>
            <textarea asp-for="StringValue" id="StringValue"></textarea>
        </div>
        <div>
            <label asp-for="IntValue">IntValue:</label>
            <input asp-for="IntValue" id="IntValue" type="number" />
        </div>
        <div>
            <label for="BoolValue">BoolValue:</label>
            <input type="checkbox" id="BoolValue" name="BoolValue" value="true" @(Model.BoolValue == true ? "checked" : "") />
        </div>


        <div>
            <label asp-for="DateTimeValue">DateTimeValue:</label>
            <input asp-for="DateTimeValue" id="DateTimeValue" type="datetime-local" />
        </div>


        <div>
            <label asp-for="Beschreibung">Beschreibung:</label>
            <textarea asp-for="Beschreibung" maxlength="250"></textarea>
        </div>
        <div>
            <label asp-for="IstAktiv">IstAktiv:</label>
            <input asp-for="IstAktiv" type="checkbox" />
        </div>
        <div style="margin-bottom:10px;">
            <label asp-for="AnpassungGesperrt">AnpassungGesperrt:</label>
            <input asp-for="AnpassungGesperrt" type="checkbox" />
        </div>
     

        <button type="submit">Speichern</button>
    </form>
    <a asp-action="Config">Züruck</a>
</div>


<script>
   
    const inputs = document.querySelectorAll('#StringValue, #IntValue, #BoolValue, #DateTimeValue');

    inputs.forEach(input => {
        input.addEventListener('input', () => {
           
            const hasValue =
                (input.type === 'checkbox') ? input.checked : input.value.trim() !== '';

           
            inputs.forEach(other => {
                if (other !== input) {
                    other.disabled = hasValue;
                }
            });

           
            if (!hasValue) {
                inputs.forEach(other => other.disabled = false);
            }
        });
    });
</script>